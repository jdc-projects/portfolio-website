export const metadata = {
  title: 'Homelab',
  description: 'A top-level overview of my homelab setup',
  thumbnail: 'https://images.unsplash.com/photo-1597138768744-9f97be8cdd64?&ixlib=rb-4.0.3',
  thumbnailAlt: 'A server rack',
  // githubLink: 'https://github.com/jdc-projects/homelab',
}

import ArchitectureDiagram from './architecture.drawio.svg'
import Image from 'components/Image'
import { Stack, Text } from '@mantine/core'

# Homelab

## Goal

To set up a lab primarily for testing and experimentation.
It also needs to be able to host some useful services, such as file hosting / sync.

I already have a server to use, so it the solution needs to work on that.
It also means I can turn it off when not needed, and save compared to cloud hosting.

It also needs to be maleable and adaptable to suit constant changes and evolution.

## Technology

- [Terraform](https://www.terraform.io/), an infrastructure-as-code (IaC) system
- [Kubernetes](https://kubernetes.io/), a container orchestration / cluster platform
- [GitHub Actions](https://github.com/features/actions), a CI/CD platform
- [CloudNative-PG operator](https://cloudnative-pg.io/), which provides Postgres databases where needed
- [Harbor](https://goharbor.io/), a container image repository
- [Keycloak](https://www.keycloak.org/), an identity / single-signon provider
- [Loki](https://grafana.com/oss/loki/), a log aggregator which feeds into Grafana
- [Oauth2-proxy](https://oauth2-proxy.github.io/oauth2-proxy/), an authentication endpoint to add SSO to certain endpoints
- [OwnCloud Infinite Scale](https://owncloud.com/infinite-scale), 'cloud storage' software
- [OpenEBS](https://openebs.io/), provides the Kubernetes storage backend
- [OpenLDAP](https://www.openldap.org/), an identity manager
- [Prometheus operator](https://prometheus-operator.dev/), providing a Grafana instance
- [Traefik](https://traefik.io/traefik/), an ingress controller and reverse proxy
- [Vaultwarden](https://www.vaultwarden.net/), a password manager
- [Velero](https://velero.io/), the cluster's backup solution

## Architecture

Each service / project will have a namespace, so that they will be reasonably separate.
This diagram is a highly simplified view of that architecture.

The only service that is explicitly included is Traefik - as it is the ingress controller, it provides access to the other services and projects.
Additionally, the provisioning and management of the cluster through GitHub Actions and Terraform is included.

<Stack align='center' gap='xs' mt={20} >
  <Image src={ArchitectureDiagram} alt='Architecture for my homelab' w='80%' />
  <Text c='dimmed' >Architecture for my homelab</Text>
</Stack>

## Skills

- Terraform
- Kubernetes
- GitHub Actions
